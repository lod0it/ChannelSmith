<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChannelSmith - Texture Channel Packer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-[#0a0a0a] text-gray-100">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="border-b border-[#2a2a2a] py-6 px-6">
            <div class="max-w-6xl mx-auto">
                <h1 class="text-4xl font-bold text-[#ff6b35] mb-2">ChannelSmith</h1>
                <p class="text-gray-400 text-lg">Texture Packing Tool for Game Artists</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 p-6">
            <div class="max-w-6xl mx-auto">
                <!-- Tab Navigation with Toggle Switch -->
                <div class="flex gap-6 mb-12 items-center justify-between">
                    <div class="switch">
                        <input class="switch-check" id="mode-toggle" type="checkbox">
                        <label class="switch-label" for="mode-toggle">
                            <span></span>
                        </label>
                    </div>
                    <button id="info-button" class="btn-info tab-icon-info" title="Open documentation">
                        <span>Info</span>
                    </button>
                </div>

                <!-- Pack Panel -->
                <div id="pack-panel" class="panel-section active">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Upload Section -->
                        <div>
                            <h2 class="text-2xl font-bold text-[#ff6b35] mb-6">Packing Texture Mode</h2>

                            <!-- Preset Selector -->
                            <div class="mb-6">
                                <label class="block text-sm font-medium mb-2 text-gray-300">
                                    Preset
                                </label>
                                <select id="pack-template" class="w-full bg-[#1a1a1a] border border-[#2a2a2a] rounded-lg px-4 py-2 text-gray-100 hover:border-[#ff6b35] focus:border-[#ff8c42] focus:outline-none transition-colors">
                                    <option value="Free">Free Mode</option>
                                    <option value="ORM">ORM (Occlusion-Roughness-Metallic)</option>
                                    <option value="ORD">ORD (Occlusion-Roughness-Displacement)</option>
                                </select>
                            </div>

                            <!-- Channel Upload Zones -->
                            <div id="pack-channels" class="space-y-4">
                                <!-- Red Channel -->
                                <div class="upload-group">
                                    <label class="block text-sm font-medium mb-2 text-gray-300">
                                        <span class="inline-block w-4 h-4 bg-red-600 rounded mr-2"></span>
                                        <span id="label-red">Red Channel</span>
                                    </label>
                                    <div class="upload-zone" data-channel="red_channel">
                                        <input type="file" accept=".png,.jpg,.jpeg,.tga,.bmp,.webp,.gif,image/*" style="display: none;">
                                        <div class="pointer-events-none">
                                            <p class="text-gray-400 mb-2 icon-upload">Drag image here or click to upload</p>
                                            <p class="text-gray-500 text-sm">PNG, JPG, TGA...</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center mt-2">
                                        <p class="text-xs text-gray-500">Default: White (1.0)</p>
                                        <button class="clear-btn hidden text-xs text-red-400 hover:text-red-300" data-channel="red_channel">Clear</button>
                                    </div>
                                </div>

                                <!-- Green Channel -->
                                <div class="upload-group">
                                    <label class="block text-sm font-medium mb-2 text-gray-300">
                                        <span class="inline-block w-4 h-4 bg-green-600 rounded mr-2"></span>
                                        <span id="label-green">Green Channel</span>
                                    </label>
                                    <div class="upload-zone" data-channel="green_channel">
                                        <input type="file" accept=".png,.jpg,.jpeg,.tga,.bmp,.webp,.gif,image/*" style="display: none;">
                                        <div class="pointer-events-none">
                                            <p class="text-gray-400 mb-2 icon-upload">Drag image here or click to upload</p>
                                            <p class="text-gray-500 text-sm">PNG, JPG, TGA...</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center mt-2">
                                        <p class="text-xs text-gray-500">Default: Mid-Gray (0.5)</p>
                                        <button class="clear-btn hidden text-xs text-red-400 hover:text-red-300" data-channel="green_channel">Clear</button>
                                    </div>
                                </div>

                                <!-- Blue Channel -->
                                <div class="upload-group">
                                    <label class="block text-sm font-medium mb-2 text-gray-300">
                                        <span class="inline-block w-4 h-4 bg-blue-600 rounded mr-2"></span>
                                        <span id="label-blue">Blue Channel</span>
                                    </label>
                                    <div class="upload-zone" data-channel="blue_channel">
                                        <input type="file" accept=".png,.jpg,.jpeg,.tga,.bmp,.webp,.gif,image/*" style="display: none;">
                                        <div class="pointer-events-none">
                                            <p class="text-gray-400 mb-2 icon-upload">Drag image here or click to upload</p>
                                            <p class="text-gray-500 text-sm">PNG, JPG, TGA...</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center mt-2">
                                        <p class="text-xs text-gray-500">Default: Black (0.0)</p>
                                        <button class="clear-btn hidden text-xs text-red-400 hover:text-red-300" data-channel="blue_channel">Clear</button>
                                    </div>
                                </div>

                                <!-- Alpha Channel (Optional) -->
                                <div class="upload-group">
                                    <label class="block text-sm font-medium mb-2 text-gray-300">
                                        <span class="inline-block w-4 h-4 bg-gray-600 rounded mr-2"></span>
                                        <span id="label-alpha">Alpha Channel (Optional)</span>
                                    </label>
                                    <div class="upload-zone" data-channel="alpha_channel">
                                        <input type="file" accept=".png,.jpg,.jpeg,.tga,.bmp,.webp,.gif,image/*" style="display: none;">
                                        <div class="pointer-events-none">
                                            <p class="text-gray-400 mb-2 icon-upload">Drag image here or click to upload</p>
                                            <p class="text-gray-500 text-sm">PNG, JPG, TGA...</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center mt-2">
                                        <p class="text-xs text-gray-500">Default: White (1.0)</p>
                                        <button class="clear-btn hidden text-xs text-red-400 hover:text-red-300" data-channel="alpha_channel">Clear</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Pack Button -->
                            <button id="pack-button" class="btn-12" title="Pack Texture">
                                <span>Pack</span>
                            </button>
                        </div>

                        <!-- Preview Section -->
                        <div>
                            <h2 class="text-2xl font-bold mb-6 text-[#ff6b35]">Preview</h2>

                            <!-- Upload Previews -->
                            <div id="pack-previews" class="space-y-4 mb-8">
                                <div class="grid grid-cols-2 gap-6">
                                    <div class="preview-card">
                                        <div class="preview-label" id="preview-label-red">Red</div>
                                        <canvas id="preview-red" class="preview-canvas" width="240" height="240"></canvas>
                                    </div>
                                    <div class="preview-card">
                                        <div class="preview-label" id="preview-label-green">Green</div>
                                        <canvas id="preview-green" class="preview-canvas" width="240" height="240"></canvas>
                                    </div>
                                    <div class="preview-card">
                                        <div class="preview-label" id="preview-label-blue">Blue</div>
                                        <canvas id="preview-blue" class="preview-canvas" width="240" height="240"></canvas>
                                    </div>
                                    <div class="preview-card">
                                        <div class="preview-label" id="preview-label-alpha">Alpha</div>
                                        <canvas id="preview-alpha" class="preview-canvas" width="240" height="240"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Preview -->
                            <div id="pack-result" class="hidden">
                                <div class="preview-card">
                                    <div class="preview-label">Packed Result</div>
                                    <img id="result-image" class="preview-canvas" style="image-rendering: pixelated;">
                                </div>
                                <div class="flex justify-center mt-4">
                                    <button id="download-packed" class="pill-button-download btn-icon-download">
                                        Download Packed Image
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Unpack Panel -->
                <div id="unpack-panel" class="panel-section hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Upload Section -->
                        <div>
                            <h2 class="text-2xl font-bold text-[#ff6b35] mb-6">Unpack Texture Mode</h2>

                            <!-- Image Upload Zone -->
                            <div class="mb-6">
                                <label class="block text-sm font-medium mb-2 text-gray-300">
                                    Packed Texture Image
                                </label>
                                <div id="unpack-upload" class="upload-zone">
                                    <input type="file" accept=".png,.jpg,.jpeg,.tga,.bmp,.webp,.gif,image/*" style="display: none;">
                                    <div class="pointer-events-none">
                                        <p class="text-gray-400 mb-2 icon-upload">Drag packed image here or click to upload</p>
                                        <p class="text-gray-500 text-sm">PNG, JPG, TGA...</p>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mt-2">
                                    <p id="unpack-upload-feedback" class="text-xs text-gray-500 hidden">File uploaded: <span id="unpack-filename"></span></p>
                                    <button id="unpack-clear-btn" class="clear-btn hidden text-xs text-red-400 hover:text-red-300" title="Clear uploaded image">Clear</button>
                                </div>
                            </div>

                            <!-- Unpack Button -->
                            <button id="unpack-button" class="btn-12">
                                <span>Unpack</span>
                            </button>
                        </div>

                        <!-- Results Section -->
                        <div>
                            <h2 class="text-2xl font-bold mb-6 text-[#ff6b35]">Extracted Channels</h2>

                            <!-- Channel Results Grid -->
                            <div id="unpack-results" class="space-y-4">
                                <!-- Populated dynamically -->
                            </div>

                            <!-- Loading Indicator -->
                            <div id="unpack-loading" class="hidden text-center text-gray-400 py-8">
                                <p>Unpacking texture...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Info Panel -->
                <div id="info-panel" class="panel-section hidden w-full">
                    <!-- Close Button -->
                    <div class="flex justify-end mb-4 px-6">
                        <button id="info-close-btn" class="text-gray-400 hover:text-[#ff6b35] transition-colors text-2xl" title="Close documentation">✕</button>
                    </div>
                    <!-- Scrollable Documentation Container (Full Width) -->
                    <div id="info-content" class="bg-[#151515] rounded-lg border border-[#2a2a2a] p-8 max-h-[70vh] overflow-y-auto mx-6">
                        <p class="text-gray-400 text-center py-8">Loading documentation...</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Progress Indicator -->
        <div id="progress-container" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-[#151515] rounded-lg p-8 max-w-md w-full mx-4">
                <p class="text-gray-100 mb-4" id="progress-message">Processing...</p>
                <div class="progress-bar">
                    <div class="progress-bar-fill" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Error Notification -->
        <div id="error-container" class="hidden fixed top-4 right-4 bg-red-900 border border-red-700 text-red-100 px-6 py-4 rounded-lg max-w-md">
            <p id="error-message"></p>
            <button onclick="document.getElementById('error-container').classList.add('hidden')" class="mt-2 text-sm text-red-300 hover:text-red-100">
                Dismiss
            </button>
        </div>

        <!-- Success Notification -->
        <div id="success-container" class="hidden fixed top-4 right-4 bg-green-900 border border-green-700 text-green-100 px-6 py-4 rounded-lg max-w-md">
            <p id="success-message"></p>
        </div>

        <!-- Zoom Modal -->
        <div id="zoom-modal" class="zoom-modal" onclick="closeZoom(event)">
            <div class="zoom-modal-content" onclick="event.stopPropagation()">
                <div class="zoom-modal-label" id="zoom-label">Preview</div>
                <button class="zoom-modal-close" onclick="closeZoom()">✕</button>
                <img id="zoom-image" class="zoom-modal-image" alt="Zoomed preview">
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
